<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Quản lý sân cầu lông{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        danger: '#EF4444',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="{% url 'home' %}" class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-bolt text-white text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-gray-900">CourtMaster</div>
                            <div class="text-sm text-gray-600">Đặt sân cầu lông</div>
                        </div>
                    </a>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="{% url 'home' %}" class="text-green-600 font-medium">Trang chủ</a>
                    <a href="{% url 'booking:court_list' %}" class="text-gray-700 hover:text-green-600 transition">Lịch sân</a>
                    <a href="{% url 'contact' %}" class="text-gray-700 hover:text-green-600 transition">Liên hệ</a>
                    <a href="{% url 'about' %}" class="text-gray-700 hover:text-green-600 transition">Về chúng tôi</a>
                    
                </div>

                <!-- Right Side -->
                <div class="flex items-center space-x-4">
                    {% if user.is_authenticated %}
                        {% if user.is_owner or user.is_staff_member or user.is_superuser %}
                        <a href="{% url 'management:dashboard' %}" class="text-gray-700 hover:text-green-600 transition">
                            Dashboard
                        </a>
                        {% endif %}
                        <div class="relative" id="user-menu">
                            <button onclick="toggleUserMenu()" class="text-gray-700 hover:text-green-600 transition flex items-center px-3 py-2 rounded-lg hover:bg-gray-50">
                                {{ user.full_name|default:user.username }}
                                <i class="fas fa-chevron-down ml-2" id="chevron-icon"></i>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 hidden border border-gray-200 z-50" id="user-dropdown">
                                <a href="{% url 'accounts:profile' %}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
                                    <i class="fas fa-user mr-2"></i>Hồ sơ
                                </a>
                                <a href="{% url 'booking:booking_list' %}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
                                    <i class="fas fa-calendar-check mr-2"></i>Đơn đặt sân
                                </a>
                                <a href="{% url 'services:service_order_list' %}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition">
                                    <i class="fas fa-concierge-bell mr-2"></i>Đơn dịch vụ
                                </a>
                                <hr class="my-2 border-gray-200">
                                <a href="{% url 'accounts:logout' %}" class="block px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition">
                                    <i class="fas fa-sign-out-alt mr-2"></i>Đăng xuất
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <a href="{% url 'accounts:login' %}" class="text-gray-700 hover:text-green-600 transition">
                            Đăng nhập
                        </a>
                        <a href="{% url 'booking:court_list' %}" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition">
                            Đặt sân ngay
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        {% for message in messages %}
        <div class="rounded-lg p-4 mb-4 {% if message.tags == 'success' %}bg-green-100 text-green-800 border border-green-300{% elif message.tags == 'error' %}bg-red-100 text-red-800 border border-red-300{% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-800 border border-yellow-300{% else %}bg-blue-100 text-blue-800 border border-blue-300{% endif %}">
            <div class="flex items-center">
                <i class="fas {% if message.tags == 'success' %}fa-check-circle{% elif message.tags == 'error' %}fa-exclamation-circle{% elif message.tags == 'warning' %}fa-exclamation-triangle{% else %}fa-info-circle{% endif %} mr-2"></i>
                {{ message }}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Content -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Column 1 - Logo -->
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-bolt text-white text-xl"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-900">CourtMaster</div>
                    </div>
                    <p class="text-gray-600">Hệ thống đặt sân cầu lông hàng đầu Việt Nam</p>
                </div>

                <!-- Column 2 - Services -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Dịch vụ</h3>
                    <ul class="space-y-2">
                        <li><a href="{% url 'booking:court_list' %}" class="text-gray-600 hover:text-green-600 transition">Đặt sân</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-green-600 transition">Giải đấu</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-green-600 transition">Huấn luyện</a></li>
                        <li><a href="{% url 'services:service_list' %}" class="text-gray-600 hover:text-green-600 transition">Cửa hàng</a></li>
                    </ul>
                </div>

                <!-- Column 3 - Company -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Công ty</h3>
                    <ul class="space-y-2">
                        <li><a href="{% url 'about' %}" class="text-gray-600 hover:text-green-600 transition">Về chúng tôi</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-green-600 transition">Tin tức</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-green-600 transition">Tuyển dụng</a></li>
                        <li><a href="{% url 'contact' %}" class="text-gray-600 hover:text-green-600 transition">Liên hệ</a></li>
                    </ul>
                </div>

                <!-- Column 4 - Contact -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Liên hệ</h3>
                    <ul class="space-y-2">
                        <li class="text-gray-600">Hotline: 1900 xxxx</li>
                        <li class="text-gray-600">Email: info@courtmaster.vn</li>
                        <li class="text-gray-600">Địa chỉ: Hà Nội, Việt Nam</li>
                    </ul>
                </div>
            </div>
            
            <!-- Copyright -->
            <div class="border-t border-gray-300 mt-12 pt-8 text-center">
                <p class="text-gray-600">©2025 CourtMaster. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        function toggleUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            const chevron = document.getElementById('chevron-icon');
            
            if (dropdown.classList.contains('hidden')) {
                dropdown.classList.remove('hidden');
                chevron.classList.remove('fa-chevron-down');
                chevron.classList.add('fa-chevron-up');
            } else {
                dropdown.classList.add('hidden');
                chevron.classList.remove('fa-chevron-up');
                chevron.classList.add('fa-chevron-down');
            }
        }

        // Đóng menu khi click ra ngoài
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('user-menu');
            const dropdown = document.getElementById('user-dropdown');
            const chevron = document.getElementById('chevron-icon');
            
            if (userMenu && !userMenu.contains(event.target)) {
                dropdown.classList.add('hidden');
                chevron.classList.remove('fa-chevron-up');
                chevron.classList.add('fa-chevron-down');
            }
        });
    </script>
</body>
</html>
